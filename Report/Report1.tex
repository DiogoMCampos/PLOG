\documentclass[a4paper]{article}

%use the english line for english reports
%usepackage[english]{babel}
\usepackage[portuguese]{babel}
\usepackage[utf8]{inputenc}
\usepackage{indentfirst}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{listings}


\begin{document}

\setlength{\textwidth}{16cm}
\setlength{\textheight}{22cm}

\title{\Huge\textbf{Oshi}\linebreak\linebreak\linebreak
\Large\textbf{Relatório Intercalar}\linebreak\linebreak
\linebreak\linebreak
\includegraphics[scale=0.1]{img/feup-logo.png}\linebreak\linebreak
\linebreak\linebreak
\Large{Mestrado Integrado em Engenharia Informática e Computação} \linebreak\linebreak
\Large{Programação em Lógica}\linebreak
}

\author{\textbf{Grupo Oshi 2:}\\
Diogo Campos - 201403468 \\
William Fukunaga - 201405119 \\
\linebreak\linebreak \\
 \\ Faculdade de Engenharia da Universidade do Porto \\ Rua Roberto Frias, s\/n, 4200-465 Porto, Portugal \linebreak\linebreak\linebreak
\linebreak\linebreak\vspace{1cm}}

\maketitle
\thispagestyle{empty}

%************************************************************************************************
%************************************************************************************************

\newpage

%Todas as figuras devem ser referidas no texto. %\ref{fig:codigoFigura}
%
%%Exemplo de código para inserção de figuras
%%\begin{figure}[h!]
%%\begin{center}
%%escolher entre uma das seguintes três linhas:
%%\includegraphics[height=20cm,width=15cm]{path relativo da imagem}
%%\includegraphics[scale=0.5]{path relativo da imagem}
%%\includegraphics{path relativo da imagem}
%%\caption{legenda da figura}
%%\label{fig:codigoFigura}
%%\end{center}
%%\end{figure}
%
%
%\textit{Para escrever em itálico}
%\textbf{Para escrever em negrito}
%Para escrever em letra normal
%``Para escrever texto entre aspas''
%
%Para fazer parágrafo, deixar uma linha em branco.
%
%Como fazer bullet points:
%\begin{itemize}
	%\item Item1
	%\item Item2
%\end{itemize}
%
%Como enumerar itens:
%\begin{enumerate}
	%\item Item 1
	%\item Item 2
%\end{enumerate}
%
%\begin{quote}``Isto é uma citação''\end{quote}


%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{O Jogo Oshi}

Oshi é um jogo de tabuleiro publicado pela WizKids em 2006 e criado por Tyler Bielman e Daniel Egnéus. Foi inspirado numa lenda Japonesa na qual a Deusa Amaterasu ofereceu ao primeiro imperador do Japão um jogo, representativo da sua sabedoria. De acordo com essa lenda, foi esse jogo que ajudou o imperador e a sua corte a gerir a sua influência e poder.\footnote{\label{note1}https://boardgamegeek.com/boardgame/23935/oshi}
\newline
\newline
O jogo é constituído por um tabuleiro 9x9 e as peças de duas cores (vermelho e branco). Estas peças são baseadas em edíficos japoneses (\textit{pagoda}) e cada cor tem:
\begin{itemize}
	\item 4 peças de 1 andar
	\item 2 peças de 2 andares
	\item 2 peças de 3 andares
\end{itemize}
O objetivo final do jogo é o de ser o primeiro a conseguir empurrar para fora do tabuleiro peças do adversário num equivalente a 7 pontos. Cada peça vale em pontos o seu número de andares.
\newline
\newline
Em cada turno, um jogador apenas pode mover uma peça e tem de o fazer ortogonalmente (frente, trás, esquerda e direita) e numa só direção, não podendo terminar na posição inicial do turno imediatamente anterior.
\newline
\newline
Este movimento pode ser de um número de casas igual ou inferior ao número de andares da peça em questão, sendo que, durante o movimento, cada peça pode empurrar um número de peças também igual ou inferior à sua altura em andares.\footnote{\label{note2}https://boardgamegeek.com/thread/135806/rules-summary}

%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Representação do Estado do Jogo}

O tabuleiro está representado em Prolog através de uma lista de listas, sendo que usamos um espaço para representar uma casa vazia e usamos os seguintes símbolos para representar as peças de cada jogador.

\begin{table}[h]
\centering
\caption{Símbolos das peças}
\label{simbolos}
\begin{tabular}{|c|c|c|}
\hline
\textbf{Tipo} & \textbf{Jogador 1} & \textbf{Jogador 2} \\ \hline
1 andar       & .                  & *                  \\ \hline
2 andares     & o                  & x                  \\ \hline
3 andares     & O                  & X                  \\ \hline
\end{tabular}
\end{table}
\clearpage

Em Prolog, para representar o tabuleiro, usamos a seguinte board, em que \textit{w1}, \textit{w2} e \textit{w3} correspondem as peças do jogador 1 de 1, 2 e 3 andares, respetivamente. Os símbolos \textit{r1}, \textit{r2} e \textit{r3} representam em Prolog as peças do jogador 3.
\bigskip
\begin{lstlisting}[language=Prolog]
    boardStart([[r3, o, o, o, o, o, o, o, r3],
    		[o, o, r2, r1, r1, r1, r2, o, o],
    		[o, o, o, o, r1, o, o, o, o],
    		[o, o, o, o, o, o, o, o, o],
    		[o, o, o, o, o, o, o, o, o],
    		[o, o, o, o, o, o, o, o, o],
    		[o, o, o, o, w1, o, o, o, o],
    		[o, o, w2, w1, w1, w1, w2, o, o],
    		[w3, o, o, o, o, o, o, o, w3]]).
\end{lstlisting}
\bigskip
Esta representação corresponde a posíção inicial que se encontra na \textit{Figure 1}, produzida usando o predicado de visualização e na \textit{Figure 2}, uma imagem real do tabuleiro inicial do Oshi.

\begin{figure}[h!]
\centering
\begin{minipage}{.4\textwidth}
  \centering
  \includegraphics[scale=0.4]{img/start-terminal.png}
  \caption{Posição Inicial}
  \label{fig:start}
\end{minipage}%
\begin{minipage}{.4\textwidth}
  \centering
  \includegraphics[scale=1.2]{img/start-picture.jpg}
  \caption{Imagem Real da Posição Inicial}
  \label{fig:real-pic}
\end{minipage}
\end{figure}

Para uma possível posição intermédia, serve de exemplo a seguinte representação.
\begin{lstlisting}[language=Prolog]
    boardMidGame([[o, o, o, o, o, o, o, o, o],
   		  [o, r1, o, o, o, o, o, o, o],
    		  [o, o, o, o, r1, o, o, o, o],
    	 	  [o, o, o, r3, o, o, o, o, o],
    	 	  [o, o, o, o, o, o, w2, o, o],
    	 	  [o, o, o, w3, o, r1, o, o, o],
    		  [o, o, r3, o, o, o, o, o, o],
    		  [o, o, o, o, o, w3, w1, r2, r2],
    		  [o, o, w1, w1, o, o, o, o, w2]]).
\end{lstlisting}
\clearpage
Sabendo que o jogo termina quando um jogador perder peças no valor de pelo menos 7 pontos, uma possível representação final do tabuleiro terá um dos jogadores nessa situação, tal como no exemplo que se segue:
\bigskip
\begin{lstlisting}[language=Prolog]
	boardEndGame([[o, o, o, o, o, o, o, o, o],
		      [o, o, o, o, o, o, o, o, o],
		      [o, o, o, o, r1, o, o, o, o],
		      [o, o, o, o, o, o, o, o, o],
		      [o, o, o, o, o, o, w2, o, o],
		      [o, o, o, o, o, r1, o, o, o],
		      [o, o, r3, o, o, o, o, o, o],
		      [o, o, o, o, o, w3, o, r2, r2],
		      [o, o, w1, w1, o, o, o, o, o]]).
\end{lstlisting}
\bigskip

\begin{figure}[h!]
\centering
\begin{minipage}{.4\textwidth}
  \centering
  \includegraphics[scale=0.4]{img/midgame-terminal.png}
  \caption{Posição Intermédia (MidGame)}
  \label{fig:mid}
\end{minipage}%
\begin{minipage}{.4\textwidth}
  \centering
  \includegraphics[scale=0.4]{img/endgame-terminal.png}
  \caption{Posição Final (EndGame)}
  \label{fig:end}
\end{minipage}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Visualização do Tabuleiro}

\begin{lstlisting}[language=Prolog]
displayCol(X, 0).

displayCol([X|Xs], I) :- 
	Next is I-1, 
	write('  '), 
	write(X), 
	write(' '), 
	displayCol(Xs, Next).
\end{lstlisting}

\begin{lstlisting}[language=Prolog]
displayLine(X, N, 0) :- 
	write(' | '), 
	nl.
	
displayLine([X|Xs], N, R) :- 
	R1 is R-1, 
	write(' | '),
	translate(X),
	displayLine(Xs, N, R1).
\end{lstlisting}

\begin{lstlisting}[language=Prolog]
displaySeparator(N, 0) :- 
	write('+').
	
displaySeparator(N, R) :- 
	R1 is R-1, 
	write('+---'), 
	displaySeparator(N, R1).
\end{lstlisting}

\begin{lstlisting}[language=Prolog]
displayBoard(X, N, 0) :- 
	write('   '), 
	displaySeparator(N, N), 
	nl, 
	write('   '), 
	letters(A), 
	displayCol(A, N).
	
displayBoard([L|Ls], N, R) :- 
	R1 is R-1,
	write('   '), 
	displaySeparator(N, N),
	nl, 
	write(' '), 
	write(R),
	displayLine(L, N, N),
	displayBoard(Ls, N, R1).
\end{lstlisting}

Descrever a forma de visualização do tabuleiro em modo de texto e o(s) predicado(s) Prolog construídos para o efeito.
Deve ser incluída pelo menos uma imagem correspondente ao output produzido pelo predicado de visualização.


%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Movimentos}

Elencar os movimentos (tipos de jogadas) possíveis e definir os cabeçalhos dos predicados que serão utilizados (ainda não precisam de estar implementados).




\end{document}
